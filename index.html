<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday! - Spidey Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        /* SPIDER-MAN THEME: Garis Retro + Jaring Laba-laba */
        @keyframes move-background {
            from { background-position: 0 0; }
            to { background-position: 100px 100px; }
        }

        /* Animasi untuk Topeng Spider-Man (lebih bervariasi) */
        @keyframes swing-spidey-1 {
            0% { transform: translateX(-120vw) translateY(20vh) rotate(-30deg) scale(1); opacity: 0; }
            10% { opacity: 1; }
            50% { transform: translateX(120vw) translateY(0vh) rotate(30deg) scale(1.1); opacity: 1; }
            90% { opacity: 0; }
            100% { transform: translateX(-120vw) translateY(20vh) rotate(-30deg) scale(1); opacity: 0; }
        }
        @keyframes swing-spidey-2 {
            0% { transform: translateX(120vw) translateY(0vh) rotate(25deg) scale(0.8); opacity: 0; }
            10% { opacity: 1; }
            50% { transform: translateX(-120vw) translateY(30vh) rotate(-25deg) scale(0.9); opacity: 1; }
            90% { opacity: 0; }
            100% { transform: translateX(120vw) translateY(0vh) rotate(25deg) scale(0.8); opacity: 0; }
        }
        @keyframes swing-spidey-3 {
            0% { transform: translateX(-150vw) translateY(10vh) rotate(-10deg) scale(0.6); opacity: 0; }
            10% { opacity: 1; }
            50% { transform: translateX(150vw) translateY(40vh) rotate(10deg) scale(0.7); opacity: 1; }
            90% { opacity: 0; }
            100% { transform: translateX(-150vw) translateY(10vh) rotate(-10deg) scale(0.6); opacity: 0; }
        }
        @keyframes swing-spidey-4 {
            0% { transform: translateX(100vw) translateY(-10vh) rotate(15deg) scale(0.9); opacity: 0; }
            10% { opacity: 1; }
            50% { transform: translateX(-100vw) translateY(10vh) rotate(-15deg) scale(1); opacity: 1; }
            90% { opacity: 0; }
            100% { transform: translateX(100vw) translateY(-10vh) rotate(15deg) scale(0.9); opacity: 0; }
        }


        body {
            font-family: 'VT323', monospace;
            background-color: #121828;
            color: #f0f0f0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            position: relative;
            /* Latar belakang jaring laba-laba + garis retro */
             background-image: 
                /* Garis retro abu-abu */
                repeating-linear-gradient(0deg, #333 0, #333 1px, transparent 1px, transparent 15px),
                repeating-linear-gradient(90deg, #333 0, #333 1px, transparent 1px, transparent 15px),
                /* Pola jaring laba-laba merah/biru */
                radial-gradient(circle at center, rgba(200, 30, 30, 0.15) 1px, transparent 1px),
                radial-gradient(circle at center, rgba(30, 30, 200, 0.15) 1px, transparent 1px);
            background-size: 100% 15px, 15px 100%, 40px 40px, 40px 40px; /* Ukuran garis + jaring */
            background-position: 0 0, 0 0, 0 0, 0 0;
            animation: move-background 10s linear infinite;
        }

        /* Kontainer untuk semua animasi di latar belakang */
        .animation-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }

        /* Bentuk dasar topeng Spider-Man dibuat dengan CSS */
        .spidey-mask {
            position: absolute;
            width: 80px;
            height: 110px;
            background-color: #c0392b; /* Merah Spider-Man */
            border-radius: 50% 50% 45% 45% / 60% 60% 40% 40%;
            border: 3px solid #111;
        }

        /* Mata topeng Spider-Man (menggunakan pseudo-elements) */
        .spidey-mask::before,
        .spidey-mask::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 45px;
            background-color: white;
            border: 3px solid #111;
            border-radius: 50% 50% 40% 40% / 60% 60% 30% 30%;
            top: 25px;
        }

        .spidey-mask::before {
            left: 5px;
            transform: rotate(-20deg);
        }

        .spidey-mask::after {
            right: 5px;
            transform: rotate(20deg);
        }
        
        /* Menempatkan dan menganimasikan topeng-topeng */
        #spidey1 { top: -50px; animation: swing-spidey-1 8s linear infinite; animation-delay: 0s; }
        #spidey2 { top: 100px; animation: swing-spidey-2 9s linear infinite; animation-delay: -2s; }
        #spidey3 { top: 50px; animation: swing-spidey-3 10s linear infinite; animation-delay: -4s; }
        #spidey4 { top: 150px; animation: swing-spidey-4 7s linear infinite; animation-delay: -1s; transform: scale(0.6); }


        .gameboy-container {
            background-color: #0050a2; /* Biru Spider-Man */
            border-radius: 20px 20px 60px 20px;
            padding: 25px;
            box-shadow: inset -5px -5px 0px 0px #003366, 15px 15px 10px rgba(0,0,0,0.5);
            width: 90vw;
            max-width: 450px;
            border: 2px solid #000;
            z-index: 10;
            position: relative;
        }

        .screen-area {
            background-color: #1f2937;
            border-radius: 10px;
            padding: 15px;
            border: 3px solid #000;
        }

        .screen {
            background-color: #1a2a22; 
            color: #a2e8a9;
            height: 300px;
            border-radius: 5px;
            border: 2px inset #000;
            padding: 15px;
            overflow-y: auto;
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: #e62117 #1a2a22;
        }

        .screen::-webkit-scrollbar { width: 8px; }
        .screen::-webkit-scrollbar-track { background: #1a2a22; }
        .screen::-webkit-scrollbar-thumb { background-color: #e62117; border-radius: 4px; }
        
        #openingScreen .title { animation: blink-caret 1s step-end infinite; }
        #openingScreen .instruction-text { animation: pulse 2s infinite; }

        @keyframes blink-caret { from, to { opacity: 1 } 50% { opacity: 0 } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        .controls-area { margin-top: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: center; }
        .d-pad { position: relative; width: 90px; height: 90px; }
        .d-pad button { position: absolute; background: #111827; width: 30px; height: 30px; border: 2px solid #000; box-shadow: inset -2px -2px #000; }
        .d-pad .up { top: 0; left: 30px; }
        .d-pad .down { bottom: 0; left: 30px; }
        .d-pad .left { top: 30px; left: 0; }
        .d-pad .right { top: 30px; right: 0; }
        .d-pad .center { top: 30px; left: 30px; z-index: -1; }

        .action-buttons { display: flex; justify-content: center; align-items: center; gap: 15px; }
        .action-buttons button { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #000; font-family: 'VT323', monospace; font-size: 24px; color: white; text-shadow: 1px 1px #000; }
        .b-button { background-color: #d63031; box-shadow: inset -3px -3px #b71c1c; }
        .a-button { background-color: #2980b9; box-shadow: inset -3px -3px #1a5276; }
        
        .system-buttons { grid-column: 1 / -1; display: flex; justify-content: center; align-items: center; gap: 15px; }
        .system-buttons button { background: #4b5563; border: 2px solid #1f2937; border-radius: 25px; padding: 5px 20px; color: #d1d5db; font-size: 16px; transition: all 0.15s ease-out; cursor: pointer; }
        #startButton { background-color: #c0392b; color: white; font-size: 20px; padding: 8px 30px; box-shadow: 0 4px #7b1a1a; }
        #startButton:hover { background-color: #e74c3c; transform: translateY(-2px); box-shadow: 0 6px #7b1a1a; }
        #startButton:active { transform: translateY(2px); box-shadow: 0 2px #7b1a1a; }
        
        @keyframes fadeInAnimation { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none !important; }

        .retro-button { background-color: #c0392b; color: white; border: 2px solid #7b1a1a; padding: 5px 15px; border-radius: 5px; text-shadow: 1px 1px #000; margin-top: 15px; cursor: pointer; }
        .retro-button:hover { background-color: #e74c3c; }

        .menu-button { width: 100%; padding: 10px; font-size: 24px; margin-bottom: 10px; }
        .polaroid-photo { background-color: white; padding: 8px 8px 15px 8px; border: 1px solid #9ca3af; box-shadow: 3px 3px 5px rgba(0,0,0,0.3); text-align: center; color: black; opacity: 0; animation: fadeInAnimation 0.5s forwards; width: 80%; margin-bottom: 10px; }
        .polaroid-photo img { width: 100%; height: auto; }
        .polaroid-photo .photo-caption { margin-top: 8px; font-size: 16px; }
        .polaroid-photo .photo-date { background-color: #fef08a; padding: 2px 8px; border-radius: 5px; display: inline-block; margin-top: 5px; font-size: 14px; }
        #musicPlayerContainer { background-color: rgba(0,0,0,0.4); border: 2px solid #e62117; border-radius: 8px; padding: 10px; }
        #albumArt { width: 100px; height: 100px; border: 2px solid #e62117; object-fit: cover; margin: 0 auto 10px; }
        .music-progress-bar-container { width: 100%; background-color: #1f2937; border-radius: 5px; cursor: pointer; padding: 2px; }
        #musicProgressBar { width: 0%; height: 8px; background-color: #e62117; border-radius: 3px; }
        .playlist-item { padding: 5px; cursor: pointer; border-bottom: 1px solid rgba(230, 33, 23, 0.2); }
        .playlist-item:hover, .playlist-item.playing { background-color: rgba(230, 33, 23, 0.3); }

        /* BARU: Style untuk animasi Tom Holland */
        #tomHollandAnimation {
            position: fixed; /* atau absolute jika ingin di dalam gameboy */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.7); /* Latar belakang gelap transparan */
            z-index: 100; /* Pastikan di atas semua elemen lain */
            opacity: 0; /* Mulai tersembunyi */
            visibility: hidden;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
            color: white;
            text-align: center;
        }

        #tomHollandAnimation.active {
            opacity: 1;
            visibility: visible;
        }

        #tomHollandAnimation img {
            max-width: 250px;
            height: auto;
            border-radius: 10px;
            border: 5px solid #d63031; /* Merah Spider-Man */
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            margin-bottom: 20px;
            animation: slideInFromTop 0.8s ease-out forwards;
        }

        #tomHollandText {
            font-size: 2.2rem;
            max-width: 80%;
            padding: 15px 25px;
            background-color: rgba(0, 0, 0, 0.8);
            border: 3px solid #0050a2; /* Biru Spider-Man */
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInText 1s ease-out 0.5s forwards; /* Delay agar muncul setelah gambar */
        }

        @keyframes slideInFromTop {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeInText {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <audio id="backgroundMusic"></audio>

    <div class="animation-background">
        <div id="spidey1" class="spidey-mask"></div>
        <div id="spidey2" class="spidey-mask"></div>
        <div id="spidey3" class="spidey-mask"></div>
        <div id="spidey4" class="spidey-mask"></div>
    </div>

    <div id="tomHollandAnimation">
        <img id="tomHollandImage" src="img/spider.png" alt="Spider-Man (Tom Holland)">
        <p id="tomHollandText">Happy birthday, Talitha. May you experience more exciting and crazy things, but don't forget to also make room for the good things that can make your life more peaceful. My prayer is that you will find more reasons to be happy, amen. "LISTEN JUST IN 13 SEC" - Tom Holland</p>
    </div>

    <div class="gameboy-container">
        <div class="screen-area">
            <div id="screen" class="screen">
                <div id="openingScreen" class="h-full flex flex-col items-center justify-center text-center">
                    <h1 class="text-4xl title">Happy Birthday!</h1>
                    <p class="mt-4 text-xl instruction-text">Press START</p>
                </div>
                <div id="mainContent" class="hidden">
                    <div id="mainMenuSection" class="min-h-full flex-col items-center justify-center hidden text-center">
                        <h2 class="text-3xl mb-4">Main Menu</h2>
                        <button id="toMessageButton" class="retro-button menu-button">Pesan</button>
                        <button id="toGalleryButton" class="retro-button menu-button bg-blue-600 hover:bg-blue-700 border-blue-800">Galeri</button>
                        <button id="toMusicButton" class="retro-button menu-button">Musik</button>
                    </div>
                    <div id="messageSection" class="min-h-full flex-col items-center justify-center hidden text-center">
                        <h2 class="text-3xl mb-4">Pesan Untukmu</h2>
                        <p id="messageText" class="text-lg min-h-[100px]"></p>
                        <button id="skipButton" class="retro-button">SKIP</button>
                        <div class="flex gap-4">
                            <button class="backToMenuButton retro-button bg-gray-600 hover:bg-gray-700 border-gray-800">Kembali</button>
                            <button id="nextToGalleryButton" class="retro-button hidden bg-blue-600 hover:bg-blue-700 border-blue-800">Lanjut ke Galeri</button>
                        </div>
                    </div>
                    <div id="gallerySection" class="min-h-full flex-col items-center justify-start hidden text-center">
                         <h2 class="text-3xl mb-4">Gallery</h2>
                         <div id="photoboxContainer" class="w-full bg-gray-900/50 p-4 rounded-lg border-2 border-red-500/50">
                             <div class="text-center mb-4 text-red-400">SPIDEY-PHOTOBOX</div>
                             <div id="photoboxOutput" class="min-h-[150px] flex flex-col items-center justify-start space-y-2 overflow-y-auto">
                                 <p>Photobox siap digunakan</p>
                                 <button id="startPrintButton" class="retro-button">MULAI CETAK</button>
                             </div>
                             <div id="progressContainer" class="w-full bg-gray-700 rounded-full h-2.5 mt-4 hidden">
                                 <div id="progressBar" class="bg-red-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                             </div>
                             <p id="progressText" class="text-center mt-2 text-sm"></p>
                         </div>
                         <div id="galleryControls" class="flex justify-center gap-4 mt-2 hidden">
                            <button id="reprintButton" class="retro-button">CETAK ULANG</button>
                            <button id="toFinalMessageButton" class="retro-button bg-blue-600 hover:bg-blue-700 border-blue-800">SELANJUTNYA</button>
                         </div>
                         <button class="backToMenuButton retro-button bg-gray-600 hover:bg-gray-700 border-gray-800">Kembali ke Menu</button>
                    </div>
                    <div id="musicSection" class="min-h-full flex-col items-center justify-center hidden text-center">
                        <h2 class="text-3xl mb-4">Music Player</h2>
                        <div id="musicPlayerContainer" class="w-full">
                            <img id="albumArt" src="https://placehold.co/100x100/111/e62117?text=Music" alt="Album Art">
                            <p id="songTitle" class="text-lg">Pilih lagu dari playlist</p>
                            <p id="songArtist" class="text-sm mb-2">-</p>
                            <div class="music-progress-bar-container" id="musicProgressContainer">
                                <div id="musicProgressBar"></div>
                            </div>
                             <div class="flex justify-between text-xs">
                                 <span id="currentTime">0:00</span>
                                 <span id="totalDuration">0:00</span>
                             </div>
                            <div class="flex justify-center items-center gap-4 my-2">
                                <button id="prevButton">⏮️</button>
                                <button id="playPauseButton" class="text-3xl">▶️</button>
                                <button id="nextButtonMusic">⏭️</button>
                            </div>
                            <div id="playlistContainer" class="text-left text-sm max-h-[80px] overflow-y-auto"></div>
                        </div>
                        <button class="backToMenuButton retro-button bg-gray-600 hover:bg-gray-700 border-gray-800 mt-2">Kembali ke Menu</button>
                    </div>
                    <div id="finalMessageSection" class="min-h-full flex-col items-center justify-center hidden text-center">
                         <h2 class="text-3xl mb-4">Pesan Terakhir</h2>
                         <p class="text-lg">
                            Terima kasih sudah menjadi bagian terindah dalam hidupku. Aku harap kita bisa terus menciptakan kenangan indah bersama. Sekali lagi, selamat ulang tahun ya. I love you! ❤️
                         </p>
                         <button id="homeButton" class="retro-button mt-4">KEMBALI KE AWAL</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="controls-area">
            <div class="d-pad">
                <button class="up" onclick="scrollScreen('up')"></button>
                <button class="down" onclick="scrollScreen('down')"></button>
                <button class="left"></button>
                <button class="right"></button>
                <button class="center"></button>
            </div>
            <div class="action-buttons">
                <button class="b-button">B</button>
                <button class="a-button">A</button>
            </div>
             <div class="system-buttons">
                <button>Select</button>
                <button id="startButton">Start</button>
            </div>
        </div>
    </div>

    <script>
         // --- DEKLARASI ELEMEN ---
         const startButton = document.getElementById('startButton');
         const openingScreen = document.getElementById('openingScreen');
         const mainContent = document.getElementById('mainContent');
         const screenEl = document.getElementById('screen');
         const backgroundMusic = document.getElementById('backgroundMusic');
         const allSections = document.querySelectorAll('#mainContent > div');
         const mainMenuSection = document.getElementById('mainMenuSection');
         const messageSection = document.getElementById('messageSection');
         const gallerySection = document.getElementById('gallerySection');
         const musicSection = document.getElementById('musicSection');
         const finalMessageSection = document.getElementById('finalMessageSection');
         const toMessageButton = document.getElementById('toMessageButton');
         const toGalleryButton = document.getElementById('toGalleryButton');
         const toMusicButton = document.getElementById('toMusicButton');
         const backToMenuButtons = document.querySelectorAll('.backToMenuButton');
         const messageTextEl = document.getElementById('messageText');
         const skipButton = document.getElementById('skipButton');
         const nextToGalleryButton = document.getElementById('nextToGalleryButton');
         const galleryControls = document.getElementById('galleryControls');
         const reprintButton = document.getElementById('reprintButton');
         const toFinalMessageButton = document.getElementById('toFinalMessageButton');
         const startPrintButton = document.getElementById('startPrintButton');
         const photoboxOutput = document.getElementById('photoboxOutput');
         const progressContainer = document.getElementById('progressContainer');
         const progressBar = document.getElementById('progressBar');
         const progressText = document.getElementById('progressText');
         const albumArt = document.getElementById('albumArt');
         const songTitle = document.getElementById('songTitle');
         const songArtist = document.getElementById('songArtist');
         const musicProgressContainer = document.getElementById('musicProgressContainer');
         const musicProgressBar = document.getElementById('musicProgressBar');
         const currentTimeEl = document.getElementById('currentTime');
         const totalDurationEl = document.getElementById('totalDuration');
         const prevButton = document.getElementById('prevButton');
         const playPauseButton = document.getElementById('playPauseButton');
         const nextButtonMusic = document.getElementById('nextButtonMusic');
         const playlistContainer = document.getElementById('playlistContainer');
         const homeButton = document.getElementById('homeButton');

         // BARU: Elemen Tom Holland
         const tomHollandAnimation = document.getElementById('tomHollandAnimation');
         const tomHollandImage = document.getElementById('tomHollandImage');
         const tomHollandText = document.getElementById('tomHollandText');


         let typeInterval;
         let isTyping = false;
         let currentTrackIndex = 0;
         const fullMessage = "Selamat ulang tahun, TN 🥂🔥. Semoga makin banyak hal seru dan gila yang bisa kamu jalanin, tapi jangan lupa juga kasih ruang buat hal-hal baik yang bisa bikin hidupmu lebih tenang. Kamu tuh orang yang unik banget—keras di luar, tapi gue tau sebenernya hati lo tuh lembut dan gampang banget baik ke orang lain. Makasih udah sering baik sama gue, ngasih makan, ngasih jajan, bahkan jadi temen cerita yang kadang ngeselin tapi bikin nagih. 🤣Doa gue, semoga lo makin nemuin alasan buat bahagia, makin dihargai orang yang bener-bener tulus sama lo, dan pelan-pelan bisa jadi versi terbaik dari diri lo. Gue percaya lo bisa, bahkan kalau lo pura-pura bandel sekalipun. Jadi, nikmatin hari lo, TN—lo pantas dirayain";
         const photoURLs = ["img/img1.jpg", "img/img2.jpg", "img/img3.jpg", "img/img4.jpg","img/img5.jpg", "img/img6.jpg", "img/img7.jpg", "img/imgakhir.jpg"];
         const playlist = [{ title: "Happy Birthday Talitha From Tom Holland", artist: "Tom Holland", art: "img/tomholl.jpg", src: "music/Tom Holland.wav" }, { title: "Spider Man Theme", artist: "MARVEL", art: "img/Marvel_Logo.svg.png", src: "music/Spider Man Theme (Spider Man_ Homecoming OST) [d0pY8JUmjrA].mp3" }, { title: "The World Is Changing", artist: "MARVEL", art: "img/Marvel_Logo.svg.png", src: "music/The World Is Changing (Spider Man_ Homecoming OST) [pt2mThoxtR4].mp3" }, ];
         
         function showSection(sectionToShow) { allSections.forEach(section => section.classList.add('hidden')); sectionToShow.classList.remove('hidden'); sectionToShow.scrollIntoView({ behavior: 'smooth' }); }
         function startTyping() { let i = 0; isTyping = true; messageTextEl.innerHTML = ''; skipButton.classList.remove('hidden'); nextToGalleryButton.classList.add('hidden'); typeInterval = setInterval(() => { if (i < fullMessage.length) messageTextEl.innerHTML += fullMessage.charAt(i++); else finishTyping(); }, 50); }
         function finishTyping() { clearInterval(typeInterval); isTyping = false; messageTextEl.innerHTML = fullMessage; skipButton.classList.add('hidden'); nextToGalleryButton.classList.remove('hidden'); }
         function delay(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }
         async function printPhotos() { document.getElementById('startPrintButton')?.classList.add('hidden'); reprintButton.classList.add('hidden'); toFinalMessageButton.classList.add('hidden'); photoboxOutput.innerHTML = ''; progressContainer.classList.remove('hidden'); for (let i = 0; i < photoURLs.length; i++) { const percentage = Math.round(((i + 1) / photoURLs.length) * 100); progressText.innerText = `Mencetak foto ${i + 1} dari ${photoURLs.length}... (${percentage}%)`; progressBar.style.width = `${percentage}%`; await delay(1500); const photoDiv = document.createElement('div'); photoDiv.className = 'polaroid-photo'; photoDiv.innerHTML = `<img src="${photoURLs[i]}" alt="Kenangan ${i+1}"><div class="photo-caption">#${i + 1}<br><span class="photo-date">09/09/25</span></div>`; photoboxOutput.appendChild(photoDiv); photoboxOutput.scrollTop = photoboxOutput.scrollHeight; } progressText.innerText = "Cetak Selesai!"; galleryControls.classList.remove('hidden'); }
         function loadTrack(index) { const track = playlist[index]; albumArt.src = track.art; songTitle.innerText = track.title; songArtist.innerText = track.artist; backgroundMusic.src = track.src; updatePlaylistUI(); }
         function playTrack() { backgroundMusic.play(); playPauseButton.innerText = '⏸️'; }
         function pauseTrack() { backgroundMusic.pause(); playPauseButton.innerText = '▶️'; }
         function formatTime(seconds) { const minutes = Math.floor(seconds / 60); const secs = Math.floor(seconds % 60); return `${minutes}:${secs < 10 ? '0' : ''}${secs}`; }
         function updateProgress() { const { duration, currentTime } = backgroundMusic; const progressPercent = (currentTime / duration) * 100; musicProgressBar.style.width = `${progressPercent}%`; currentTimeEl.innerText = formatTime(currentTime); if (duration) totalDurationEl.innerText = formatTime(duration); }
         function buildPlaylist() { playlistContainer.innerHTML = ''; playlist.forEach((song, index) => { const item = document.createElement('div'); item.className = 'playlist-item'; item.innerText = `${index + 1}. ${song.title}`; item.addEventListener('click', () => { currentTrackIndex = index; loadTrack(currentTrackIndex); playTrack(); }); playlistContainer.appendChild(item); }); updatePlaylistUI(); }
         function updatePlaylistUI() { const items = playlistContainer.querySelectorAll('.playlist-item'); items.forEach((item, index) => { item.classList.toggle('playing', index === currentTrackIndex); }); }
         function resetState() { messageTextEl.innerHTML = ''; photoboxOutput.innerHTML = `<p>Photobox siap digunakan</p><button id="startPrintButton" class="retro-button">MULAI CETAK</button>`; document.getElementById('startPrintButton').addEventListener('click', printPhotos); progressContainer.classList.add('hidden'); progressBar.style.width = '0%'; progressText.innerText = ''; galleryControls.classList.add('hidden'); }
         
         // BARU: Fungsi untuk menampilkan animasi Tom Holland
         function showTomHollandAnimation() {
            tomHollandAnimation.classList.add('active');
            // Reset animations to ensure they replay
            tomHollandImage.style.animation = 'none';
            tomHollandText.style.animation = 'none';
            void tomHollandImage.offsetWidth; // Trigger reflow
            void tomHollandText.offsetWidth; // Trigger reflow
            tomHollandImage.style.animation = 'slideInFromTop 0.8s ease-out forwards';
            tomHollandText.style.animation = 'fadeInText 1s ease-out 0.5s forwards';

            // Sembunyikan setelah beberapa detik
            setTimeout(() => {
                tomHollandAnimation.classList.remove('active');
            }, 13000); // Tampilkan selama 13 detik
         }


         startButton.addEventListener('click', () => { 
             if (!openingScreen.classList.contains('hidden')) {
                 openingScreen.classList.add('hidden');
                 mainContent.classList.remove('hidden');
                 resetState();
                 showSection(mainMenuSection);
                 loadTrack(currentTrackIndex);
                 playTrack();
                 showTomHollandAnimation(); // Tampilkan animasi Tom Holland saat START
             }
         });
         toMessageButton.addEventListener('click', () => { showSection(messageSection); startTyping(); });
         toGalleryButton.addEventListener('click', () => showSection(gallerySection));
         toMusicButton.addEventListener('click', () => showSection(musicSection));
         backToMenuButtons.forEach(btn => btn.addEventListener('click', () => showSection(mainMenuSection)));
         skipButton.addEventListener('click', () => { if (isTyping) finishTyping(); });
         nextToGalleryButton.addEventListener('click', () => showSection(gallerySection));
         document.getElementById('startPrintButton').addEventListener('click', printPhotos);
         reprintButton.addEventListener('click', printPhotos);
         toFinalMessageButton.addEventListener('click', () => showSection(finalMessageSection));
         playPauseButton.addEventListener('click', () => backgroundMusic.paused ? playTrack() : pauseTrack());
         prevButton.addEventListener('click', () => { currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length; loadTrack(currentTrackIndex); playTrack(); });
         nextButtonMusic.addEventListener('click', () => { currentTrackIndex = (currentTrackIndex + 1) % playlist.length; loadTrack(currentTrackIndex); playTrack(); });
         backgroundMusic.addEventListener('timeupdate', updateProgress);
         backgroundMusic.addEventListener('ended', () => nextButtonMusic.click());
         musicProgressContainer.addEventListener('click', (e) => { const width = musicProgressContainer.clientWidth; const clickX = e.offsetX; const duration = backgroundMusic.duration; backgroundMusic.currentTime = (clickX / width) * duration; });
         homeButton.addEventListener('click', () => { mainContent.classList.add('hidden'); openingScreen.classList.remove('hidden'); pauseTrack(); });
         buildPlaylist();
    </script>
</body>
</html>